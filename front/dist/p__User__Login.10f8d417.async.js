(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1796],{78874:function(U,T,a){"use strict";a.d(T,{Z:function(){return B}});var I=a(67294),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"}}]},name:"github",theme:"outlined"},D=A,H=a(27029),z=function(w,V){return I.createElement(H.Z,Object.assign({},w,{ref:V,icon:D}))};z.displayName="GithubOutlined";var B=I.forwardRef(z)},2603:function(U,T,a){"use strict";a.d(T,{Z:function(){return B}});var I=a(67294),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},D=A,H=a(27029),z=function(w,V){return I.createElement(H.Z,Object.assign({},w,{ref:V,icon:D}))};z.displayName="LockOutlined";var B=I.forwardRef(z)},98268:function(U){U.exports={container:"container___bly96",lang:"lang___2kLqE",content:"content___17R68",top:"top___ieZWL",header:"header___3_-29",logo:"logo___St1-F",title:"title___2ZjHY",desc:"desc___1Koiu",main:"main___9TC7Z",icon:"icon___2vnhe",other:"other___NVb-Q",register:"register___NT0PJ",prefixIcon:"prefixIcon___13GU2"}},7330:function(){},28578:function(U,T,a){"use strict";a.r(T),a.d(T,{default:function(){return ke}});var I=a(49111),A=a(19650),D=a(63185),H=a(9676),z=a(18106),B=a(45934),ie=a(9715),w=a(82482),V=a(74379),Oe=a(38648),qe=a(34792),k=a(48086),L=a(11849),G=a(3182),_e=a(17462),Me=a(76772),$=a(2824),be=a(94043),P=a.n(be),f=a(67294),je={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},xe=je,le=a(27029),ue=function(n,t){return f.createElement(le.Z,Object.assign({},n,{ref:t,icon:xe}))};ue.displayName="MobileOutlined";var Se=f.forwardRef(ue),Ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 161H699.2c-49.1 0-97.1 14.1-138.4 40.7L512 233l-48.8-31.3A255.2 255.2 0 00324.8 161H96c-17.7 0-32 14.3-32 32v568c0 17.7 14.3 32 32 32h228.8c49.1 0 97.1 14.1 138.4 40.7l44.4 28.6c1.3.8 2.8 1.3 4.3 1.3s3-.4 4.3-1.3l44.4-28.6C602 807.1 650.1 793 699.2 793H928c17.7 0 32-14.3 32-32V193c0-17.7-14.3-32-32-32zM324.8 721H136V233h188.8c35.4 0 69.8 10.1 99.5 29.2l48.8 31.3 6.9 4.5v462c-47.6-25.6-100.8-39-155.2-39zm563.2 0H699.2c-54.4 0-107.6 13.4-155.2 39V298l6.9-4.5 48.8-31.3c29.7-19.1 64.1-29.2 99.5-29.2H888v488zM396.9 361H211.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5zm223.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c0-4.1-3.2-7.5-7.1-7.5H627.1c-3.9 0-7.1 3.4-7.1 7.5zM396.9 501H211.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5zm416 0H627.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5z"}}]},name:"read",theme:"outlined"},Fe=Ze,oe=function(n,t){return f.createElement(le.Z,Object.assign({},n,{ref:t,icon:Fe}))};oe.displayName="ReadOutlined";var Pe=f.forwardRef(oe),Ce=a(89366),ce=a(2603),Ie=a(78874),et=a(57663),Le=a(71577),tt=a(47673),Ee=a(4107),Te=a(61834),Be=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"];function W(){return W=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},W.apply(this,arguments)}function de(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),t.push.apply(t,s)}return t}function fe(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?de(Object(t),!0).forEach(function(s){Ne(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):de(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function Ne(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ge(e,n,t,s,u,o,O){try{var M=e[o](O),h=M.value}catch(N){t(N);return}M.done?n(h):Promise.resolve(h).then(s,u)}function ve(e){return function(){var n=this,t=arguments;return new Promise(function(s,u){var o=e.apply(n,t);function O(h){ge(o,s,u,O,M,"next",h)}function M(h){ge(o,s,u,O,M,"throw",h)}O(void 0)})}}function Re(e,n){if(e==null)return{};var t=Ae(e,n),s,u;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(u=0;u<o.length;u++)s=o[u],!(n.indexOf(s)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,s)||(t[s]=e[s]))}return t}function Ae(e,n){if(e==null)return{};var t={},s=Object.keys(e),u,o;for(o=0;o<s.length;o++)u=s[o],!(n.indexOf(u)>=0)&&(t[u]=e[u]);return t}function q(e,n){return we(e)||ze(e,n)||He(e,n)||De()}function De(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function He(e,n){if(!!e){if(typeof e=="string")return me(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return me(e,n)}}function me(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,s=new Array(n);t<n;t++)s[t]=e[t];return s}function ze(e,n){var t=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],u=!0,o=!1,O,M;try{for(t=t.call(e);!(u=(O=t.next()).done)&&(s.push(O.value),!(n&&s.length===n));u=!0);}catch(h){o=!0,M=h}finally{try{!u&&t.return!=null&&t.return()}finally{if(o)throw M}}return s}}function we(e){if(Array.isArray(e))return e}var Ue=f.forwardRef(function(e,n){var t=(0,f.useState)(e.countDown||60),s=q(t,2),u=s[0],o=s[1],O=(0,f.useState)(!1),M=q(O,2),h=M[0],N=M[1],pe=(0,f.useState)(),K=q(pe,2),Y=K[0],E=K[1],ye=e.rules,te=e.name,y=e.phoneName,R=e.fieldProps,d=e.captchaTextRender,J=d===void 0?function(x,S){return x?"".concat(S," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:d,ae=e.captchaProps,ne=Re(e,Be),Q=(0,f.useCallback)(function(){var x=ve(regeneratorRuntime.mark(function S(C){return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,E(!0),p.next=4,ne.onGetCaptcha(C);case 4:E(!1),N(!0),p.next=12;break;case 8:p.prev=8,p.t0=p.catch(0),E(!1),console.log(p.t0);case 12:case"end":return p.stop()}},S,null,[[0,8]])}));return function(S){return x.apply(this,arguments)}}(),[]);return(0,f.useEffect)(function(){var x=0,S=e.countDown;return h&&(x=window.setInterval(function(){o(function(C){return C<=1?(N(!1),clearInterval(x),S||60):C-1})},1e3)),function(){return clearInterval(x)}},[h]),f.createElement(w.Z.Item,{noStyle:!0,shouldUpdate:!0},function(x){var S=x.getFieldValue,C=x.validateFields;return f.createElement("div",{style:fe(fe({},R==null?void 0:R.style),{},{display:"flex",alignItems:"center"}),ref:n},f.createElement(Ee.Z,W({},R,{style:{flex:1,transition:"width .3s",marginRight:8}})),f.createElement(Le.Z,W({style:{display:"block"},disabled:h,loading:Y},ae,{onClick:ve(regeneratorRuntime.mark(function X(){var p;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(l.prev=0,!y){l.next=9;break}return l.next=4,C([y].flat(1));case 4:return p=S([y].flat(1)),l.next=7,Q(p);case 7:l.next=11;break;case 9:return l.next=11,Q("");case 11:l.next=16;break;case 13:l.prev=13,l.t0=l.catch(0),console.log(l.t0);case 16:case"end":return l.stop()}},X,null,[[0,13]])}))}),J(h,u)))})}),Ge=(0,Te.Z)(Ue),Ve=a(15196),_=a(5966),v=a(58086),$e=a(73727),We=a(92002),at=a(36571),Ke=a(22121),Ye=a(91896);function Je(e,n){return ee.apply(this,arguments)}function ee(){return ee=(0,G.Z)(P().mark(function e(n,t){var s;return P().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return s=(0,Ye.Z)({},n),o.abrupt("return",(0,v.WY)("/api/login/captcha",(0,L.Z)({method:"POST",params:(0,L.Z)({},s)},t||{})));case 2:case"end":return o.stop()}},e)})),ee.apply(this,arguments)}var Qe=a(98268),m=a.n(Qe),he=a(73841),r=a(85893),Xe=function(){var n=he.Z.getItem,t=he.Z.addItem,s=(0,f.useState)(!1),u=(0,$.Z)(s,2),o=u[0],O=u[1],M=(0,f.useState)({}),h=(0,$.Z)(M,2),N=h[0],pe=h[1],K=(0,f.useState)("account"),Y=(0,$.Z)(K,2),E=Y[0],ye=Y[1],te=(0,v.tT)("@@initialState"),y=te.initialState,R=te.setInitialState,d=(0,v.YB)(),J=function(i){var c=i.content;return(0,r.jsx)(Me.Z,{style:{marginBottom:24},message:c,type:"error",showIcon:!0})},ae=function(){var l=(0,G.Z)(P().mark(function i(){var c,g,Z,b;return P().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,y==null||(c=y.fetchUserInfo)===null||c===void 0?void 0:c.call(y);case 2:if(g=F.sent,!g){F.next=8;break}return F.next=6,y==null||(Z=y.fetchConnectionLess)===null||Z===void 0?void 0:Z.call(y);case 6:b=F.sent,R((0,L.Z)((0,L.Z)({},y),{},{currentUser:g,connectionLess:b}));case 8:case"end":return F.stop()}},i)}));return function(){return l.apply(this,arguments)}}(),ne=function(){!v.m8||setTimeout(function(){var i=v.m8.location.query,c=i.redirect;v.m8.replace(c||"/")},10)},Q=function(i){var c=n("JSESSIONID");t(c+"-alias",i.alias,"/"),t(c+"-host",i.host,"/"),t(c+"-port",i.port,"/"),t(c+"-username",i.username,"/"),t(c+"-tenantId",i.id,"/"),R((0,L.Z)((0,L.Z)({},y),{},{activeConnection:i,activeConnectionDesc:i.username+"@"+i.host+":"+i.port}))},x=function(){var l=(0,G.Z)(P().mark(function i(c){var g,Z,b,se,F;return P().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return O(!0),j.prev=1,j.next=4,(0,Ke.aM)((0,L.Z)((0,L.Z)({},c),{},{type:E}));case 4:if(g=j.sent,Z=g.message,g=g.data==null?g:g.data,g.status!=="ok"){j.next=13;break}return g.defaultConnect==null?(b=d.formatMessage({id:"pages.login.success-without-tenant",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF0C\u8BF7\u6307\u5B9A\u8981\u7BA1\u7406\u7684\u6570\u636E\u6E90"}),k.default.success(b)):Q(g.defaultConnect),j.next=11,ae();case 11:return ne(),j.abrupt("return");case 13:se=d.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25"}),Oe.default.error({message:se,description:Z}),j.next=21;break;case 17:j.prev=17,j.t0=j.catch(1),F=d.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25"}),k.default.error(F);case 21:O(!1);case 22:case"end":return j.stop()}},i,null,[[1,17]])}));return function(c){return l.apply(this,arguments)}}(),S=N.status,C=N.type,X=w.Z.useForm(),p=(0,$.Z)(X,1),re=p[0];return(0,r.jsxs)("div",{className:m().container,children:[(0,r.jsx)("div",{className:m().lang,"data-lang":!0,children:v.pD&&(0,r.jsx)(v.pD,{})}),(0,r.jsxs)("div",{className:m().content,children:[(0,r.jsxs)("div",{className:m().top,children:[(0,r.jsx)("div",{className:m().header,children:(0,r.jsxs)($e.rU,{to:"/",children:[(0,r.jsx)("img",{alt:"logo",className:m().logo,src:"/iotdb-logo.png"}),(0,r.jsx)("span",{className:m().title,children:d.formatMessage({id:"pages.layouts.userLayout.mainTitle",defaultMessage:"Time Series Database"})})]})}),(0,r.jsx)("div",{className:m().desc,children:d.formatMessage({id:"pages.layouts.userLayout.title"})})]}),(0,r.jsxs)("div",{className:m().main,children:[(0,r.jsxs)(Ve.ZP,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:d.formatMessage({id:"pages.login.submit",defaultMessage:"\u767B\u5F55"})},render:function(i,c){return c.pop()},submitButtonProps:{loading:o,size:"large",style:{width:"100%"}}},onFinish:function(){var l=(0,G.Z)(P().mark(function i(c){return P().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:x(c);case 1:case"end":return Z.stop()}},i)}));return function(i){return l.apply(this,arguments)}}(),form:re,children:[(0,r.jsxs)(B.Z,{activeKey:E,onChange:ye,children:[(0,r.jsx)(B.Z.TabPane,{tab:d.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},"account"),(0,r.jsx)(B.Z.TabPane,{tab:d.formatMessage({id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"}),disabled:!0},"mobile")]}),S==="error"&&C==="account"&&(0,r.jsx)(J,{content:d.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF\uFF08admin/ant.design)"})}),E==="account"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(Ce.Z,{className:m().prefixIcon})},placeholder:d.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin"}),rules:[{required:!0,message:(0,r.jsx)(v._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,r.jsx)(_.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(ce.Z,{className:m().prefixIcon})},placeholder:d.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: Admin123"}),rules:[{required:!0,message:(0,r.jsx)(v._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),S==="error"&&C==="mobile"&&(0,r.jsx)(J,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),E==="mobile"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.Z,{fieldProps:{size:"large",prefix:(0,r.jsx)(Se,{className:m().prefixIcon})},name:"mobile",placeholder:d.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,r.jsx)(v._H,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,r.jsx)(v._H,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,r.jsx)(Ge,{fieldProps:{size:"large",prefix:(0,r.jsx)(ce.Z,{className:m().prefixIcon})},captchaProps:{size:"large"},placeholder:d.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(i,c){return i?"".concat(c," ").concat(d.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):d.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:(0,r.jsx)(v._H,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var l=(0,G.Z)(P().mark(function i(c){var g;return P().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,Je({phone:re.getFieldValue("mobile")});case 2:if(g=b.sent,g!==!1){b.next=5;break}return b.abrupt("return");case 5:k.default.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return b.stop()}},i)}));return function(i){return l.apply(this,arguments)}}()})]}),(0,r.jsxs)("div",{style:{marginBottom:24},children:[(0,r.jsx)(H.Z,{danger:!0,defaultChecked:!0,noStyle:!0,name:"autoLogin",children:(0,r.jsx)(v._H,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,r.jsx)("a",{style:{float:"right"},children:(0,r.jsx)(v._H,{id:"pages.login.registerAccount",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]}),(0,r.jsxs)(A.Z,{className:m().other,children:[(0,r.jsx)(v._H,{id:"pages.login.relatedLinks",defaultMessage:"\u76F8\u5173\u94FE\u63A5"}),(0,r.jsx)("a",{href:"https://iotdb.apache.org/zh/",target:"_blank",children:(0,r.jsx)(Pe,{className:m().icon})}),(0,r.jsx)("a",{href:"https://github.com/apache/iotdb",target:"_blank",children:(0,r.jsx)(Ie.Z,{className:m().icon})})]})]})]}),(0,r.jsx)(We.Z,{})]})},ke=Xe},17462:function(U,T,a){"use strict";var I=a(43673),A=a.n(I),D=a(7330),H=a.n(D)}}]);
